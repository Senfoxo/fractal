<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Learn Fractal++</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/themes/prism.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/components/prism-javascript.min.js"></script>
    <style>
.token.keyword {
    color: #ff5a5f;
}

.token.function {
    color: #0074D9;
}

.token.string {
    color: #2ECC40;
}

.token.number {
    color: #39CCCC;
}

.token.comment {
    color: #999;
}

.token.parameter {
    color: #333;
}
    
        body {
            font-family: 'Montserrat', sans-serif;
            background-color: #fff;
            color: #333;
            line-height: 1.6;
        }
    
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
    
        h1 {
            color: #ff5a5f;
            text-align: center;
            margin-bottom: 20px;
        }
    
        .fractal {
            color: #333;
        }
    
        .plus {
            color: #ff5a5f;
            font-weight: 700;
        }
    
        .description {
            text-align: center;
            margin-bottom: 30px;
        }
    
        .step {
            background-color: #f5f5f5;
            padding: 20px;
            border-radius: 5px;
            margin-bottom: 20px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
    
        h2 {
            color: #ff5a5f;
            margin-bottom: 10px;
        }
    
        h3 {
            color: #666;
            margin-bottom: 10px;
        }
    
        .example {
            margin-bottom: 20px;
        }
    
        .exercise {
            margin-bottom: 20px;
        }
    
        .editor {
            background-color: #f8f8f8;
            color: #333;
            padding: 10px;
            border-radius: 5px;
            min-height: 100px;
            overflow-y: auto;
            outline: none;
            margin-bottom: 10px;
            white-space: pre-wrap;
        }
    
        .nav-buttons {
            display: flex;
            justify-content: flex-end;
            margin-top: 20px;
        }
    
        button {
            background-color: #ff5a5f;
            color: #fff;
            border: none;
            padding: 10px 20px;
            font-size: 1rem;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
    
        button:hover {
            background-color: #ff3d46;
        }
    
        #nextBtn {
            background-color: #ccc;
            cursor: not-allowed;
        }
    
        #nextBtn.active {
            background-color: #ff5a5f;
            cursor: pointer;
        }
    
        .success {
            background-color: #c8e6c9;
            color: #388e3c;
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 10px;
        }
    
        .error {
            background-color: #ffcdd2;
            color: #c62828;
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 10px;
        }
    
        .tip {
            background-color: #fff59d;
            color: #f57f17;
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 10px;
        }
    
        .solution {
            margin-top: 20px;
        }
    
        #progressBar {
            width: 100%;
            height: 20px;
            background-color: #f5f5f5;
            border-radius: 5px;
            margin-bottom: 20px;
            overflow: hidden;
        }
    
        #progressBar .progress {
            width: 0;
            height: 100%;
            background-color: #ff5a5f;
            transition: width 0.5s;
        }
    
        #progressText {
            text-align: center;
            margin-bottom: 10px;
        }
    
        #confetti {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 9999;
        }
    
        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background-color: #ff5a5f;
            animation: confettiFall 3s ease-in-out infinite;
        }
    
        @keyframes confettiFall {
            0% {
                transform: translateY(-100%);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh);
                opacity: 0;
            }
        }
    </style>
    </head>
    <body>
        <div class="container">
            <h1>Learn <span class="fractal">Fractal</span><span class="plus">++</span></h1>
            <p class="description">Welcome to the Fractal++ learning experience! In this interactive tutorial, you'll learn the basics of Fractal++ programming through examples and exercises.</p>
            <div id="progressBar">
                <div class="progress"></div>
            </div>
            <div id="progressText"></div>
        
            <div id="step1" class="step">
                <h2>Step 1: Importing Modules</h2>
                <div class="example">
                    <h3>Example:</h3>
                    <pre><code class="language-fractal"><span class="token keyword"><^></span> <span class="token operator">::=</span> <span class="token keyword">import</span> <span class="token module">io</span></code></pre>
                </div>
                <div class="exercise">
                    <h3>Exercise:</h3>
                    <p>Import the <code>math</code> module using the <code><^></code> syntax.</p>
                    <div class="editor" contenteditable="true"></div>
                    <button class="check-btn">Check</button>
                    <button class="show-solution-btn">Show Solution</button>
                </div>
                <div class="result"></div>
            </div>
        
            <div id="step2" class="step" style="display: none;">
                <h2>Step 2: Defining Constants</h2>
                <div class="example">
                    <h3>Example:</h3>
                    <pre><code class="language-fractal"><span class="token keyword"><#></span> <span class="token operator">::=</span> <span class="token string">"Fractal++ is the best language!"</span></code></pre>
                </div>
                <div class="exercise">
                    <h3>Exercise:</h3>
                    <p>Define a constant named <code>PI</code> with the value <code>3.14159</code>.</p>
                    <div class="editor" contenteditable="true"></div>
                    <button class="check-btn">Check</button>
                    <button class="show-solution-btn">Show Solution</button>
                </div>
                <div class="result"></div>
            </div>
        
            <div id="step3" class="step" style="display: none;">
                <h2>Step 3: Defining Functions</h2>
                <div class="example">
                    <h3>Example:</h3>
                    <pre><code class="language-fractal"><span class="token keyword"><$></span> <span class="token operator">::=</span> <span class="token punctuation">(</span><span class="token parameter">msg</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
        <span class="token module">io</span><span class="token punctuation">.</span><span class="token function">console</span><span class="token punctuation">(</span><span class="token parameter">msg</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span></code></pre>
</div>
<div class="exercise">
<h3>Exercise:</h3>
<p>Define a function named <code>greet</code> that takes a parameter <code>name</code> and prints "Hello, [name]!".</p>
<div class="editor" contenteditable="true"></div>
<button class="check-btn">Check</button>
<button class="show-solution-btn">Show Solution</button>
</div>
<div class="result"></div>
</div>
<div id="step4" class="step" style="display: none;">
    <h2>Step 4: Recursive Functions</h2>
    <div class="example">
        <h3>Example:</h3>
        <pre><code class="language-fractal"><span class="token keyword"><@></span> <span class="token operator">::=</span> <span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token parameter">n</span> <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token number">1</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token parameter">n</span> <span class="token operator">*</span> <span class="token function"><@></span><span class="token punctuation">(</span><span class="token parameter">n</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre>
    </div>
    <div class="exercise">
        <h3>Exercise:</h3>
        <p>Write a recursive function named <code>countDown</code> that takes a number <code>n</code> as input and returns a string with the numbers from <code>n</code> down to <code>1</code> separated by newline characters (<code>\n</code>).</p>
        <div class="editor" contenteditable="true"></div>
        <button class="check-btn">Check</button>
        <button class="show-solution-btn">Show Solution</button>
    </div>
    <div class="result"></div>
</div>
<div id="step5" class="step" style="display: none;">
    <h2>Step 5: Main Program</h2>
    <div class="example">
        <h3>Example:</h3>
        <pre><code class="language-fractal"><span class="token keyword"><&></span> <span class="token operator">::=</span> <span class="token punctuation">{</span>
<span class="token keyword">let</span> <span class="token parameter">number</span> <span class="token operator">=</span> <span class="token number">5</span>
<span class="token keyword">let</span> <span class="token parameter">result</span> <span class="token operator">=</span> <span class="token function"><!></span><span class="token punctuation">(</span><span class="token parameter">number</span><span class="token punctuation">)</span>
<span class="token module">math</span><span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"Factorial of"</span><span class="token punctuation">,</span> <span class="token parameter">number</span><span class="token punctuation">,</span> <span class="token string">"is"</span><span class="token punctuation">,</span> <span class="token parameter">result</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword"><%></span> <span class="token operator">::=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword"><&></span>
<span class="token keyword"><^></span>
<span class="token function"><%></span><span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre>
</div>
<div class="exercise">
<h3>Exercise:</h3>
<p>Write the main program that calculates and prints the sum of numbers from 1 to 10.</p>
<div class="editor" contenteditable="true"></div>
<button class="check-btn">Check</button>
<button class="show-solution-btn">Show Solution</button>
</div>
<div class="result"></div>
</div>
<div id="completion" class="step" style="display: none;">
    <h2>Congratulations!</h2>
    <p>You have learned the basics of Fractal++. Keep it up!</p>
    <button id="goBackBtn">Go Back</button>
</div>

<div class="nav-buttons">
    <button id="nextBtn" disabled>Next</button>
</div>
</div>

<div id="confetti"></div>

<script>
const steps = document.querySelectorAll('.step');
const nextBtn = document.getElementById('nextBtn');
const goBackBtn = document.getElementById('goBackBtn');
const progressBar = document.querySelector('#progressBar .progress');
const progressText = document.getElementById('progressText');
const confettiContainer = document.getElementById('confetti');
let currentStep = 0;
let totalSteps = steps.length;

function showStep(stepIndex) {
    steps[currentStep].style.display = 'none';
    steps[stepIndex].style.display = 'block';
    currentStep = stepIndex;

    if (currentStep === totalSteps - 1) {
        nextBtn.style.display = 'none';
        createConfetti();
    } else {
        nextBtn.style.display = 'inline-block';
        nextBtn.disabled = true;
        nextBtn.classList.remove('active');
    }

    updateProgress();
}

function updateProgress() {
        const progress = (currentStep / (totalSteps - 1)) * 100;
        progressBar.style.width = `${progress}%`;
        progressText.textContent = `Step ${currentStep + 1} of ${totalSteps}`;
    }

    nextBtn.addEventListener('click', () => {
        if (!nextBtn.disabled) {
            showStep(currentStep + 1);
        }
    });

    goBackBtn.addEventListener('click', () => {
        window.location.href = 'index.html';
    });
    
    function checkExercise(step, solution) {
    const editorContent = step.querySelector('.editor').textContent;
    const resultDiv = step.querySelector('.result');
    const showSolutionBtn = step.querySelector('.show-solution-btn');

    resultDiv.innerHTML = '';

    if (editorContent.trim() === solution.trim()) {
        resultDiv.innerHTML = '<div class="success">Correct! You nailed it!</div>';
        nextBtn.disabled = false;
        nextBtn.classList.add('active');
        showSolutionBtn.style.display = 'none';
    } else {
        provideTip(step, tips[index]);
    }

    Prism.highlightAll();
}


    function showSolution(step, solution) {
        const resultDiv = step.querySelector('.result');
        resultDiv.innerHTML = `<div class="solution"><h4>Correct Solution:</h4><pre><code class="language-fractal">${solution}</code></pre></div>`;
        Prism.highlightAll();
    }

    function provideTip(step, tipMessage) {
        const resultDiv = step.querySelector('.result');
        resultDiv.innerHTML = `<div class="tip">${tipMessage}</div>`;
    }

    function createConfetti() {
        for (let i = 0; i < 100; i++) {
            const confetti = document.createElement('div');
            confetti.classList.add('confetti');
            confetti.style.left = `${Math.random() * 100}%`;
            confetti.style.animationDelay = `${Math.random() * 3}s`;
            confettiContainer.appendChild(confetti);
        }
    }

    document.querySelectorAll('.check-btn').forEach((btn, index) => {
    let attempts = 0;
    const showSolutionBtn = btn.parentElement.parentElement.querySelector('.show-solution-btn');
    showSolutionBtn.style.display = 'none';

    btn.addEventListener('click', () => {
        const solutions = [
            '<^> ::= import math',
            '<#> ::= 3.14159',
            '<$> ::= (name) => {\n    io.console("Hello, " + name + "!")\n}',
            '<@> ::= (n) => n === 1 ? "1" : n + "\n" + <@>(n - 1)',
            '<&> ::= {\n    let sum = 0\n    for (let i = 1; i <= 10; i++) {\n        sum += i\n    }\n    math.print("Sum:", sum)\n}\n\n<%> ::= () => <&>\n\n<^>\n<%>()'
        ];
        const tips = [
            'Tip: Make sure to import the math module.',
            'Tip: Define the constant PI with the value 3.14159.',
            'Tip: Define a function named greet that takes a parameter name and prints "Hello, [name]!".',
            'Tip: Use a ternary operator to check if n is 1, and if not, concatenate n with a newline character and the recursive call with n - 1.',
            'Tip: Write the main program that calculates and prints the sum of numbers from 1 to 10.'
        ];

        attempts++;
        const editorContent = btn.parentElement.parentElement.querySelector('.editor').textContent;
        const resultDiv = btn.parentElement.parentElement.querySelector('.result');

        if (editorContent.trim() === solutions[index].trim()) {
            resultDiv.innerHTML = '<div class="success">Correct! You nailed it!</div>';
            nextBtn.disabled = false;
            nextBtn.classList.add('active');
            showSolutionBtn.style.display = 'none';
        } else {
            resultDiv.innerHTML = `<div class="tip">${tips[index]}</div>`;
            if (attempts === 3) {
                showSolutionBtn.style.display = 'inline-block';
                showSolutionBtn.addEventListener('click', () => {
                    showSolution(btn.parentElement.parentElement, solutions[index]);
                    showSolutionBtn.style.display = 'none';
                });
            }
        }
    });
});


    document.querySelectorAll('.show-solution-btn').forEach((btn) => {
        btn.style.backgroundColor = '#ffb347'; 
        btn.style.color = '#fff';        
        btn.addEventListener('click', () => {
            const solutions = [
                '<^> ::= import math',
                '<#> ::= 3.14159',
                '<$> ::= (name) => {\n    io.console("Hello, " + name + "!")\n}',
                '<!> ::= (n) => {\n    if (n <= 1) {\n        return n\n    }\n    return (n - 1) + (n - 2)\n}',
                '<&> ::= {\n    let sum = 0\n    for (let i = 1; i <= 10; i++) {\n        sum += i\n    }\n    math.print("Sum:", sum)\n}\n\n<%> ::= () => <&>\n\n<^>\n<%>()'
            ];
            showSolution(btn.parentElement.parentElement, solutions[index]);
            btn.style.display = 'none';
        });
    });

    showStep(currentStep);

    steps[totalSteps - 1].addEventListener('transitionend', () => {
        if (currentStep === totalSteps - 1) {
            createConfetti();
        }
    });

    Prism.highlightAll();
</script>

