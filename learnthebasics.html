<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Learn Fractal++</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/themes/prism-tomorrow.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/components/prism-javascript.min.js"></script>
    <style>
        :root {
            --primary-color: #6C63FF;
            --secondary-color: #3F3D56;
            --background-color: #F9FAFB;
            --text-color: #1F2937;
            --success-color: #10B981;
            --error-color: #EF4444;
            --warning-color: #F59E0B;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--background-color);
            color: var(--text-color);
            line-height: 1.6;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 2rem;
        }

        h1 {
            text-align: center;
            margin-bottom: 1.5rem;
            font-size: 2.5rem;
        }

        .fractal {
            color: var(--primary-color);
        }

        .plus {
            color: var(--secondary-color);
            font-weight: 700;
        }

        .description {
            text-align: center;
            margin-bottom: 2rem;
            font-size: 1.1rem;
        }

        .step {
            background-color: #fff;
            padding: 2rem;
            border-radius: 8px;
            margin-bottom: 2rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }

        .step:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
        }

        h2 {
            color: var(--primary-color);
            margin-bottom: 1rem;
            font-size: 1.8rem;
        }

        h3 {
            color: var(--secondary-color);
            margin-bottom: 0.8rem;
            font-size: 1.3rem;
        }

        .example,
        .exercise {
            margin-bottom: 1.5rem;
        }

        .editor {
            background-color: #2D2D2D;
            color: #fff;
            padding: 1rem;
            border-radius: 5px;
            min-height: 100px;
            font-family: 'Fira Code', monospace;
            font-size: 0.9rem;
            resize: vertical;
            overflow: auto;
        }

        .nav-buttons {
            display: flex;
            justify-content: flex-end;
            margin-top: 1.5rem;
        }

        button {
            background-color: var(--primary-color);
            color: #fff;
            border: none;
            padding: 0.8rem 1.5rem;
            font-size: 1rem;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Poppins', sans-serif;
        }

        button:hover {
            background-color: var(--secondary-color);
            transform: translateY(-2px);
        }

        #nextBtn:disabled {
            background-color: #ccc;
            cursor: not-allowed;
        }

        .success,
        .error,
        .tip {
            padding: 1rem;
            border-radius: 5px;
            margin-bottom: 1rem;
            font-weight: 600;
        }

        .success {
            background-color: var(--success-color);
            color: #fff;
        }

        .error {
            background-color: var(--error-color);
            color: #fff;
        }

        .tip {
            background-color: var(--warning-color);
            color: #fff;
        }

        .solution {
            margin-top: 1.5rem;
            background-color: #2D2D2D;
            padding: 1rem;
            border-radius: 5px;
        }

        #progressBar {
            width: 100%;
            height: 10px;
            background-color: #E5E7EB;
            border-radius: 5px;
            margin-bottom: 1.5rem;
            overflow: hidden;
        }

        #progressBar .progress {
            width: 0;
            height: 100%;
            background-color: var(--primary-color);
            transition: width 0.5s ease;
        }

        #progressText {
            text-align: center;
            margin-bottom: 1.5rem;
            font-weight: 600;
            color: var(--secondary-color);
        }

        #confetti {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 9999;
        }

        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background-color: var(--primary-color);
            animation: confettiFall 3s ease-in-out infinite;
        }

        @keyframes confettiFall {
            0% {
                transform: translateY(-100%) rotate(0deg);
                opacity: 1;
            }

            100% {
                transform: translateY(100vh) rotate(720deg);
                opacity: 0;
            }
        }

        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }

            h1 {
                font-size: 2rem;
            }

            .step {
                padding: 1.5rem;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <h1><span class="fractal">Fractal</span><span class="plus">++</span></h1>
        <p class="description">Welcome to the Fractal++ learning experience! In this interactive tutorial, you'll learn
            the basics of Fractal++ programming through examples and exercises.</p>
        <div id="progressBar">
            <div class="progress"></div>
        </div>
        <div id="progressText"></div>

        <div id="step1" class="step">
            <h2>Step 1: Importing Modules</h2>
            <div class="example">
                <h3>Example:</h3>
                <pre><code class="language-fractal"><span class="token keyword"><^></span> <span class="token operator">::=</span> <span class="token keyword">import</span> <span class="token module">io</span></code></pre>
            </div>
            <div class="exercise">
                <h3>Exercise:</h3>
                <p>Import the <code>math</code> module using the <code><^></code> syntax.</p>
                <div class="editor" contenteditable="true"></div>
                <button class="check-btn">Check</button>
                <button class="show-solution-btn" style="display: none;">Show Solution</button>
            </div>
            <div class="result"></div>
        </div>

        <div id="step2" class="step" style="display: none;">
            <h2>Step 2: Defining Constants</h2>
            <div class="example">
                <h3>Example:</h3>
                <pre><code class="language-fractal"><span class="token keyword"><#></span> <span class="token operator">::=</span> <span class="token string">"Fractal++ is the best language!"</span></code></pre>
            </div>
            <div class="exercise">
                <h3>Exercise:</h3>
                <p>Define a constant named <code>PI</code> with the value <code>3.14159</code>.</p>
                <div class="editor" contenteditable="true"></div>
                <button class="check-btn">Check</button>
                <button class="show-solution-btn" style="display: none;">Show Solution</button>
            </div>
            <div class="result"></div>
        </div>

        <div id="step3" class="step" style="display: none;">
            <h2>Step 3: Defining Functions</h2>
            <div class="example">
                <h3>Example:</h3>
                <pre><code class="language-fractal"><span class="token keyword"><$></span> <span class="token operator">::=</span> <span class="token punctuation">(</span><span class="token parameter">msg</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token module">io</span><span class="token punctuation">.</span><span class="token function">console</span><span class="token punctuation">(</span><span class="token parameter">msg</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre>
            </div>
            <div class="exercise">
                <h3>Exercise:</h3>
                <p>Define a function named <code>greet</code> that takes a parameter <code>name</code> and prints
                    "Hello, [name]!".</p>
                <div class="editor" contenteditable="true"></div>
                <button class="check-btn">Check</button>
                <button class="show-solution-btn" style="display: none;">Show Solution</button>
            </div>
            <div class="result"></div>
        </div>

        <div id="step4" class="step" style="display: none;">
            <h2>Step 4: Recursive Functions</h2>
            <div class="example">
                <h3>Example:</h3>
                <pre><code class="language-fractal"><span class="token keyword"><@></span> <span class="token operator">::=</span> <span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token parameter">n</span> <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token number">1</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token parameter">n</span> <span class="token operator">*</span> <span class="token function"><@></span><span class="token punctuation">(</span><span class="token parameter">n</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre>
            </div>
            <div class="exercise">
                <h3>Exercise:</h3>
                <p>Write a recursive function named <code>countDown</code> that takes a number <code>n</code> as input
                    and returns a string with the numbers from <code>n</code> down to <code>1</code> separated by
                    newline characters (<code>\n</code>).</p>
                <div class="editor" contenteditable="true"></div>
                <button class="check-btn">Check</button>
                <button class="show-solution-btn" style="display: none;">Show Solution</button>
            </div>
            <div class="result"></div>
        </div>

        <div id="step5" class="step" style="display: none;">
            <h2>Step 5: Main Program</h2>
            <div class="example">
                <h3>Example:</h3>
                <pre><code class="language-fractal"><span class="token keyword"><&></span> <span class="token operator">::=</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> <span class="token parameter">number</span> <span class="token operator">=</span> <span class="token number">5</span>
    <span class="token keyword">let</span> <span class="token parameter">result</span> <span class="token operator">=</span> <span class="token function"><@></span><span class="token punctuation">(</span><span class="token parameter">number</span><span class="token punctuation">)</span>
    <span class="token module">math</span><span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"Factorial of"</span><span class="token punctuation">,</span> <span class="token parameter">number</span><span class="token punctuation">,</span> <span class="token string">"is"</span><span class="token punctuation">,</span> <span class="token parameter">result</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword"><%></span> <span class="token operator">::=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword"><&></span>
<span class="token keyword"><^></span>
<span class="token function"><%></span><span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre>
            </div>
            <div class="exercise">
                <h3>Exercise:</h3>
                <p>Write the main program that calculates and prints the sum of numbers from 1 to 10.</p>
                <div class="editor" contenteditable="true"></div>
                <button class="check-btn">Check</button>
                <button class="show-solution-btn" style="display: none;">Show Solution</button>
            </div>
            <div class="result"></div>
        </div>

        <div id="completion" class="step" style="display: none;">
            <h2>Congratulations!</h2>
            <p>You have learned the basics of Fractal++. Keep it up!</p>
            <button id="goBackBtn">Go Back</button>
        </div>
        <div class="nav-buttons">
            <button id="nextBtn" disabled>Next</button>
        </div>
    </div>

    <div id="confetti"></div>

    <script>
        const steps = document.querySelectorAll('.step');
        const nextBtn = document.getElementById('nextBtn');
        const progressBar = document.querySelector('#progressBar .progress');
        const progressText = document.getElementById('progressText');
        const confettiContainer = document.getElementById('confetti');
        let currentStep = 0;
        let totalSteps = steps.length - 1; // Exclude completion step

        function showStep(stepIndex) {
            steps[currentStep].style.display = 'none';
            steps[stepIndex].style.display = 'block';
            currentStep = stepIndex;

            nextBtn.style.display = currentStep === totalSteps ? 'none' : 'inline-block';
            nextBtn.disabled = true;
            nextBtn.classList.remove('active');

            updateProgress();

            if (currentStep === totalSteps) {
                createConfetti();
            }
        }

        function updateProgress() {
            const progress = (currentStep / totalSteps) * 100;
            progressBar.style.width = `${progress}%`;
            progressText.textContent = `Step ${currentStep + 1} of ${totalSteps + 1}`;
        }

        nextBtn.addEventListener('click', () => {
            if (!nextBtn.disabled) {
                showStep(currentStep + 1);
            }
        });

        function checkExercise(step, solution) {
            const editorContent = step.querySelector('.editor').textContent;
            const resultDiv = step.querySelector('.result');

            resultDiv.innerHTML = '';

            if (editorContent.trim() === solution.trim()) {
                resultDiv.innerHTML = '<div class="success">Correct! You nailed it!</div>';
                nextBtn.disabled = false;
                nextBtn.classList.add('active');
            } else {
                provideTip(step, tips[currentStep]);
            }

            Prism.highlightAll();
        }

        function showSolution(step, solution) {
            const editor = step.querySelector('.editor');
            editor.textContent = solution;
            Prism.highlightElement(editor);
        }

        function provideTip(step, tipMessage) {
            const resultDiv = step.querySelector('.result');
            resultDiv.innerHTML = `<div class="tip">${tipMessage}</div>`;
        }

        function createConfetti() {
            for (let i = 0; i < 100; i++) {
                const confetti = document.createElement('div');
                confetti.classList.add('confetti');
                confetti.style.left = `${Math.random() * 100}%`;
                confetti.style.animationDelay = `${Math.random() * 3}s`;
                confettiContainer.appendChild(confetti);
            }
        }

        const solutions = [
            '<^> ::= import math',
            '<#> ::= 3.14159',
            '<$> ::= (name) => {\n    io.console("Hello, " + name + "!")\n}',
            '<@> ::= (n) => n === 1 ? "1" : n + "\\n" + <@>(n - 1)',
            '<&> ::= {\n    let sum = 0\n    for (let i = 1; i <= 10; i++) {\n        sum += i\n    }\n    math.print("Sum:", sum)\n}\n\n<%> ::= () => <&>\n\n<^>\n<%>()'
        ];

        const tips = [
            'Tip: Make sure to import the math module using the correct syntax.',
            'Tip: Use the <#> syntax to define a constant with the value 3.14159.',
            'Tip: Define a function that takes a name parameter and uses io.console to print the greeting.',
            'Tip: Use a ternary operator for the base case and concatenate the recursive call result.',
            'Tip: Use a for loop to sum numbers from 1 to 10, then use math.print to display the result.'
        ];

        document.querySelectorAll('.check-btn').forEach((btn, index) => {
            let attempts = 0;
            btn.addEventListener('click', () => {
                attempts++;
                checkExercise(steps[index], solutions[index]);
                if (attempts === 3) {
                    const showSolutionBtn = steps[index].querySelector('.show-solution-btn');
                    showSolutionBtn.style.display = 'inline-block';
                }
            });
        });

        document.querySelectorAll('.show-solution-btn').forEach((btn, index) => {
            btn.addEventListener('click', () => {
                showSolution(steps[index], solutions[index]);
                btn.style.display = 'none';
            });
        });

        document.getElementById('goBackBtn').addEventListener('click', () => {
            window.location.href = 'index.html';
        });

        showStep(currentStep);
        Prism.highlightAll();
    </script>
</body>

</html>